"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3996],{9382:(w,v,s)=>{s.d(v,{I:()=>k});var c=s(467),h=s(5083),f=function(e){return e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS",e}(f||{}),y=function(e){return e.Rear="REAR",e.Front="FRONT",e}(y||{});class p extends h.E_{getPhoto(a){var n=this;return(0,c.A)(function*(){return new Promise(function(){var r=(0,c.A)(function*(t,o){if(a.webUseInput||a.source===f.Photos)n.fileInputExperience(a,t,o);else if(a.source===f.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=a.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:a.promptLabelPhoto||"From Photos"},{title:a.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",function(){var l=(0,c.A)(function*(u){0===u.detail?n.fileInputExperience(a,t,o):n.cameraExperience(a,t,o)});return function(u){return l.apply(this,arguments)}}())}else n.cameraExperience(a,t,o)});return function(t,o){return r.apply(this,arguments)}}())})()}pickImages(a){var n=this;return(0,c.A)(function*(){return new Promise(function(){var r=(0,c.A)(function*(t,o){n.multipleFileInputExperience(t,o)});return function(t,o){return r.apply(this,arguments)}}())})()}cameraExperience(a,n,r){var t=this;return(0,c.A)(function*(){if(customElements.get("pwa-camera-modal")){const o=document.createElement("pwa-camera-modal");o.facingMode=a.direction===y.Front?"user":"environment",document.body.appendChild(o);try{yield o.componentOnReady(),o.addEventListener("onPhoto",function(){var i=(0,c.A)(function*(l){const u=l.detail;null===u?r(new h.I9("User cancelled photos app")):u instanceof Error?r(u):n(yield t._getCameraPhoto(u,a)),o.dismiss(),document.body.removeChild(o)});return function(l){return i.apply(this,arguments)}}()),o.present()}catch{t.fileInputExperience(a,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),t.fileInputExperience(a,n,r)})()}fileInputExperience(a,n,r){let t=document.querySelector("#_capacitor-camera-input");const o=()=>{var i;null===(i=t.parentNode)||void 0===i||i.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",i=>{const l=t.files[0];let u="jpeg";if("image/png"===l.type?u="png":"image/gif"===l.type&&(u="gif"),"dataUrl"===a.resultType||"base64"===a.resultType){const m=new FileReader;m.addEventListener("load",()=>{if("dataUrl"===a.resultType)n({dataUrl:m.result,format:u});else if("base64"===a.resultType){const D=m.result.split(",")[1];n({base64String:D,format:u})}o()}),m.readAsDataURL(l)}else n({webPath:URL.createObjectURL(l),format:u}),o()}),t.addEventListener("cancel",i=>{r(new h.I9("User cancelled photos app")),o()})),t.accept="image/*",t.capture=!0,a.source===f.Photos||a.source===f.Prompt?t.removeAttribute("capture"):a.direction===y.Front?t.capture="user":a.direction===y.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(a,n){let r=document.querySelector("#_capacitor-camera-input-multiple");const t=()=>{var o;null===(o=r.parentNode)||void 0===o||o.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",o=>{const i=[];for(let l=0;l<r.files.length;l++){const u=r.files[l];let m="jpeg";"image/png"===u.type?m="png":"image/gif"===u.type&&(m="gif"),i.push({webPath:URL.createObjectURL(u),format:m})}a({photos:i}),t()}),r.addEventListener("cancel",o=>{n(new h.I9("User cancelled photos app")),t()})),r.accept="image/*",r.click()}_getCameraPhoto(a,n){return new Promise((r,t)=>{const o=new FileReader,i=a.type.split("/")[1];"uri"===n.resultType?r({webPath:URL.createObjectURL(a),format:i,saved:!1}):(o.readAsDataURL(a),o.onloadend=()=>{const l=o.result;r("dataUrl"===n.resultType?{dataUrl:l,format:i,saved:!1}:{base64String:l.split(",")[1],format:i,saved:!1})},o.onerror=l=>{t(l)})})}checkPermissions(){var a=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw a.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw a.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var a=this;return(0,c.A)(function*(){throw a.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var a=this;return(0,c.A)(function*(){throw a.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var a=this;return(0,c.A)(function*(){throw a.unavailable("Not implemented on web.")})()}}new p;const d=(0,h.F3)("Camera",{web:()=>new p});var P=function(e){return e.Accessibility="accessibility",e.Account="account",e.AirplaneMode="airplane_mode",e.Apn="apn",e.ApplicationDetails="application_details",e.ApplicationDevelopment="application_development",e.Application="application",e.AppNotification="app_notification",e.BatteryOptimization="battery_optimization",e.Bluetooth="bluetooth",e.Captioning="captioning",e.Cast="cast",e.DataRoaming="data_roaming",e.Date="date",e.Display="display",e.Dream="dream",e.Home="home",e.Keyboard="keyboard",e.KeyboardSubType="keyboard_subtype",e.Locale="locale",e.Location="location",e.ManageApplications="manage_applications",e.ManageAllApplications="manage_all_applications",e.MemoryCard="memory_card",e.Network="network",e.NfcSharing="nfcsharing",e.NfcPayment="nfc_payment",e.NfcSettings="nfc_settings",e.Print="print",e.Privacy="privacy",e.QuickLaunch="quick_launch",e.Search="search",e.Security="security",e.Settings="settings",e.ShowRegulatoryInfo="show_regulatory_info",e.Sound="sound",e.Storage="storage",e.Sync="sync",e.Usage="usage",e.UserDictionary="user_dictionary",e.VoiceInput="voice_input",e.Wifi="wifi",e.WifiIp="wifi_ip",e.Wireless="wireless",e}(P||{}),E=function(e){return e.About="about",e.App="app",e.AutoLock="autoLock",e.Bluetooth="bluetooth",e.DateTime="dateTime",e.FaceTime="facetime",e.General="general",e.Keyboard="keyboard",e.ICloud="iCloud",e.ICloudStorageBackup="iCloudStorageBackup",e.International="international",e.LocationServices="locationServices",e.Music="music",e.Notes="notes",e.Notifications="notifications",e.Phone="phone",e.Photos="photos",e.ManagedConfigurationList="managedConfigurationList",e.Reset="reset",e.Ringtone="ringtone",e.Sounds="sounds",e.SoftwareUpdate="softwareUpdate",e.Store="store",e.Tracking="tracking",e.Wallpaper="wallpaper",e.WiFi="wifi",e.Tethering="tethering",e.DoNotDisturb="doNotDisturb",e.TouchIdPasscode="touchIdPasscode",e.ScreenTime="screenTime",e.Accessibility="accessibility",e}(E||{});const C=(0,h.F3)("NativeSettings",{web:()=>s.e(1709).then(s.bind(s,1709)).then(e=>new e.NativeSettingsWeb)});var _=s(4438),U=s(3656);let k=(()=>{var e;class a{constructor(r){this.platform=r}init(){var r=this;return(0,c.A)(function*(){const t=yield r.checkPermissions();r.platform.is("ios")&&"limited"==t.photos&&r.getLimitedLibraryPhotos()})()}pickPhotos(){return(0,c.A)(function*(){try{return(yield d.pickImages({quality:90,limit:5})).photos}catch(r){return console.error("Error pickPhotos:",r),[]}})()}pickLimitedLibraryPhotos(){return(0,c.A)(function*(){try{return(yield d.pickLimitedLibraryPhotos()).photos}catch(r){return console.error("Error pickLimitedLibraryPhotos: ",r),[]}})()}getLimitedLibraryPhotos(){return(0,c.A)(function*(){try{return(yield d.getLimitedLibraryPhotos()).photos}catch(r){return console.error("Error getLimitedLibraryPhotos: ",r),[]}})()}checkPermissions(){return(0,c.A)(function*(){try{return yield d.checkPermissions()}catch(r){return console.error("Error checkPermissions:",r),null}})()}requestPermissions(){return(0,c.A)(function*(){try{return yield d.requestPermissions({permissions:["photos"]})}catch(r){return console.error("Error requestPermissions: ",r),null}})()}openPhotoSettings(){return(0,c.A)(function*(){try{yield C.open({optionAndroid:P.Bluetooth,optionIOS:E.App})}catch(r){console.error("L\u1ed7i khi m\u1edf c\xe0i \u0111\u1eb7t:",r)}})()}}return(e=a).\u0275fac=function(r){return new(r||e)(_.KVO(U.OD))},e.\u0275prov=_.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),a})()},1307:(w,v,s)=>{s.d(v,{S:()=>b});var c=s(177),h=s(4341),f=s(4742),y=s(4438);let b=(()=>{var p;class L{}return(p=L).\u0275fac=function(P){return new(P||p)},p.\u0275mod=y.$C({type:p}),p.\u0275inj=y.G2t({imports:[c.MD,h.YN,f.bv]}),L})()}}]);